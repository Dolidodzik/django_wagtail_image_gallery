{% extends "base.html" %}

{% load static wagtailcore_tags wagtailimages_tags %}

{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/wagtail_gallery.css' %}">
{% endblock %}

{% block body_class %}template-blogindexpage{% endblock %}

{% block content %}
    <h1>{{ page.title }}</h1>

    <div class="intro">{{ page.intro|richtext }}</div>

    <div class = "container">
      <div class="row">
        {% for subpage in gallery_subpages %}
          {% with subpage=subpage.specific %}
                {% with subpage.main_image as main_image %}

                    <!-- Those lines creates image that links to subpage -->
                    <a href="{% pageurl subpage %}">
                      {% if main_image %}
                        {% image main_image fill-250x250 as image %}
                        <img src="{{ image.url }}" alt="Image not found"/>
                      {% endif %}
                    </a>

                {% endwith %}
          {% endwith %}
        {% endfor %}
      </div>
    </div>

{% endblock %}
